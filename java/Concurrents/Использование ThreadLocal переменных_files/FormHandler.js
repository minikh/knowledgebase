var FormHandler,__bind=function(fn,me){return function(){return fn.apply(me,arguments);};};FormHandler=(function(){FormHandler.prototype.defaultOnSuccess=function(data){$("body").css("cursor","default");window.location.href=data;if(window.location.href.split('#')[0]===data.split('#')[0]){return window.location.reload(true);}};FormHandler.prototype.defaultOnFail=function(data){$('.clear-on-resubmit').remove();if(data.status===413){this.form.prepend("<div class='alert alert-danger form-error clear-on-resubmit'>"+"<a class='close' data-dismiss='alert' href='#'>x</a>Operation cannot be completed: too much data sent</div>");}else{this.form.prepend(data.responseText);}
$('.default-form input[type="submit"]').prop('disabled',false);return $("body").css("cursor","default");};function FormHandler(selector,onSuccess,onFail){this.selector=selector;this.onSuccess=onSuccess!=null?onSuccess:this.defaultOnSuccess;this.onFail=onFail!=null?onFail:this.defaultOnFail;this.defaultOnFail=__bind(this.defaultOnFail,this);this.defaultOnSuccess=__bind(this.defaultOnSuccess,this);this.form=$(this.selector);this.form.submit((function(_this){return function(){$("body").css("cursor","progress");$('.default-form input[type="submit"]').prop('disabled',true);$.post(_this.form.attr('action'),_this.form.serialize()).done(function(data){return _this.onSuccess(data);}).fail(function(data){return _this.onFail(data);});return false;};})(this));}
return FormHandler;})();new FormHandler('.default-form');//# sourceMappingURL=FormHandler.js.map
