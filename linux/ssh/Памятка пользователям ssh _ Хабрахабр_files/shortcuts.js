$(document).ready(function(){function t(t,o){$(document).bind("keydown",t,function(){if(s)return $(document).trigger(o),!1})}var s=!0;if($("input,textarea,select").live("focus",function(){s=!1}),$("input,textarea,select").live("blur",function(){s=!0}),$(".shortcuts_items").size()){var o=$(".shortcuts_items .shortcuts_item");$(window).scroll(function(){var t=window.pageYOffset+0,s=window.pageYOffset+50;o.each(function(o,e){var c=$(e),r=c.offset().top+20;t<r&&r<s&&(c.hasClass("focus")||($(".shortcuts_items .shortcuts_item.focus").removeClass("focus"),c.addClass("focus")))})})}var e={"/":"shortcuts.focus_to_search",h:"shortcuts.to_first_post",l:"shortcuts.to_last_post",j:"shortcuts.to_next_post",k:"shortcuts.to_prev_post",o:"shortcuts.open_post"},c={c:"shortcuts.to_comment_form",t:"shortcuts.add_to_tracker",m:"shortcuts.subscribe_comments",r:"shortcuts.refresh_comments",f:"shortcuts.to_next_unreaded_comment",j:"shortcuts.to_next_new_comment",k:"shortcuts.to_prev_new_comment",esc:"shortcuts.escape"};$.each(e,t),$.each(c,t),$("input, textarea").bind("keydown","alt+return ctrl+return",function(){var t=$(this).parents("form");return $(document).trigger("shortcuts.submit_form",t),!1}),$(document).bind("shortcuts.subscribe_comments",function(t,s){$("#subscribe_comments").trigger("click")}),$(document).bind("shortcuts.add_to_tracker",function(t,s){$("#tracker_comments").trigger("click")}),$(document).bind("shortcuts.focus_to_search",function(t,s){openSearch()}),$(document).bind("shortcuts.submit_form",function(t,s){$('input[type="submit"],input.submit,input.edit',s).each(function(t,s){$(s).hasClass("hidden")||s.click()})}),$(document).bind("shortcuts.to_next_page",function(){var t=$("#next_page").attr("href");"undefined"!=typeof t&&(document.location.href=t)}),$(document).bind("shortcuts.to_prev_page",function(){var t=$("#previous_page").attr("href");"undefined"!=typeof t&&(document.location.href=t)}),$(document).bind("shortcuts.to_first_post",function(){var t=$(".shortcuts_items");t.size()&&($(".shortcuts_item",t).first().hasClass("focus")?$(document).trigger("shortcuts.to_prev_page"):($(".shortcuts_item.focus",t).removeClass("focus"),$(".shortcuts_item",t).first().addClass("focus")),$.scrollTo($(".shortcuts_item.focus",t),200,{axis:"y"}))}),$(document).bind("shortcuts.to_last_post",function(){var t=$(".shortcuts_items");t.size()&&($(".shortcuts_item",t).last().hasClass("focus")?$(document).trigger("shortcuts.to_next_page"):($(".shortcuts_item.focus",t).removeClass("focus"),$(".shortcuts_item",t).last().addClass("focus")),$.scrollTo($(".shortcuts_item.focus",t),200,{axis:"y"}))}),$(document).bind("shortcuts.to_next_post",function(){var t=$(".shortcuts_items");if(t.size()){if(0==$(".shortcuts_item.focus",t).size())$(".shortcuts_item",t).first().addClass("focus");else{var s=$(".shortcuts_item.focus",t),o=s.next();0==o.size()?$(document).trigger("shortcuts.to_next_page"):(s.removeClass("focus"),o.addClass("focus"))}$.scrollTo($(".shortcuts_item.focus",t),200,{axis:"y"})}}),$(document).bind("shortcuts.to_prev_post",function(){var t=$(".shortcuts_items");if(t.size()){if(0==$(".shortcuts_item.focus",t).size())$(".shortcuts_item",t).last().addClass("focus");else{var s=$(".shortcuts_item.focus",t),o=s.prev();0==o.size()?$(document).trigger("shortcuts.to_prev_page"):(s.removeClass("focus"),o.addClass("focus"))}$.scrollTo($(".shortcuts_item.focus",t),200,{axis:"y"})}}),$(document).bind("shortcuts.open_post",function(){if($(".shortcuts_items").size()){var t=$(".shortcuts_items .shortcuts_item.focus .post__title_link").attr("href");t&&(document.location.href=t)}}),$(document).bind("shortcuts.to_comment_form",function(){$("#comments_form_placeholder").size()&&($.scrollTo($("#comments_form_placeholder"),200,{axis:"y"}),$("#comment_text").focus())}),$(document).bind("shortcuts.refresh_comments",function(){g_show_xpanel&&$("#xpanel .refresh").trigger("click")}),$(document).bind("shortcuts.to_next_unreaded_comment",function(){g_show_xpanel&&$("#xpanel .new").trigger("click")}),$(document).bind("shortcuts.to_next_new_comment",function(){g_show_xpanel&&$("#xpanel .next_new").trigger("click")}),$(document).bind("shortcuts.to_prev_new_comment",function(){g_show_xpanel&&$("#xpanel .prev_new").trigger("click")})});